; HstWB Package Install Script
; ----------------------------
;
; Author: Henrik Noerfjand Stengaard
; Date: 2017-05-31
;
; This script extracts and installs zip archives for HstWB Package. 

; Create demos directory, if it doesn't exist
IF NOT EXISTS "SYSTEMDIR:Demos/"
  makedir >NIL: "SYSTEMDIR:Demos"
ENDIF

; Create games directory, if it doesn't exist
IF NOT EXISTS "SYSTEMDIR:Games/"
  makedir >NIL: "SYSTEMDIR:Games"
ENDIF

echo "Installing HstWB..."
unzip -qq -o -x PACKAGEDIR:hstwb.zip -d SYSTEMDIR:

; Fix read write execute flags
protect >NIL: SYSTEMDIR:C/#? +rwe

; Copy scsi device
IF EXISTS DEVS:scsi.device
  COPY >NIL: DEVS:scsi.device SYSTEMDIR:Devs
ENDIF

; Create default settings, load scsi device and icon library and start Amiga Boot Selector
ECHO "" NOLINE >SYSTEMDIR:S/Load-ScsiDevice
ECHO "" NOLINE >SYSTEMDIR:S/Load-IconLibrary 
ECHO "" NOLINE >SYSTEMDIR:S/Start-ABS 

; Copy disk icon to DH1, if device is present
Assign >NIL: EXISTS DH1:
IF NOT WARN
  copy >NIL: DH0:Disk.info TO DH1:Disk.info
ENDIF 